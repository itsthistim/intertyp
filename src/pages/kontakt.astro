---
import Layout from "@/layouts/Layout.astro";
import Nav from "@/components/Nav.astro";
import Footer from "@/components/Footer.astro";
---

<Layout title="Intertyp GmbH – Kontakt">
	<Nav />
	<main>
		<div class="header">
			<h1>Kontaktieren Sie uns</h1>
			<p>Wir freuen uns auf Ihre Anfrage und stehen Ihnen gerne für Fragen zur Verfügung.</p>
		</div>
		<div class="map-container">
			<iframe
				src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2654.338985286553!2d14.2873791!3d48.2963315!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4773979a1630df2b%3A0x438d4da070b2e285!2sInter%20Typ!5e0!3m2!1sen!2sat!4v1749219952588!5m2!1sen!2sat"
				width="100%"
				height="350"
				style="border:0;"
				allowfullscreen
				loading="lazy"
				referrerpolicy="no-referrer-when-downgrade"></iframe>
		</div>
		<div class="contact-grid">
			<div class="contact-info">
				<div class="info-item">
					<div>
						<strong>Adresse</strong>
						<p>Stockhofstraße 11, 4020 Linz</p>
					</div>
				</div>
				<div class="info-item">
					<div>
						<strong>Telefon</strong>
						<p>+43 732 66 30 00</p>
					</div>
				</div>
				<div class="info-item">
					<div>
						<strong>E-Mail</strong>
						<p><a href="mailto:stempel@intertyp.at">stempel@intertyp.at</a></p>
					</div>
				</div>
				<div class="info-item">
					<div>
						<strong>Öffnungszeiten</strong>
						<table class="opening-hours">
							<tr><td>Montag</td><td>09:00 – 12:00</td></tr>
							<tr><td>Dienstag</td><td>09:00 – 12:00</td></tr>
							<tr><td>Mittwoch</td><td>09:00 – 12:00</td></tr>
							<tr><td>Donnerstag</td><td>09:00 – 12:00</td></tr>
						</table>
					</div>
				</div>
			</div>
			<form class="contact-form" method="POST" action="/api/contact">
				<div class="form-row">
					<input type="text" name="name" placeholder="Ihr Name" required />
					<input type="email" name="email" placeholder="Ihre E-Mail" required />
				</div>
				<input type="text" name="subject" placeholder="Betreff" required />
				<textarea name="message" placeholder="Nachricht" rows="5" required></textarea>
				<button type="submit">Nachricht senden</button>
				<div id="form-status" style="margin-top:0.5rem;font-size:1rem;"></div>
			</form>
			<script type="text/javascript">
				async function handleContactFormSubmit(event) {
					event.preventDefault();
					const form = event.target;
					const status = document.getElementById("form-status");
					if (!status) return false;

					status.textContent = "";
					const formData = new FormData(form);
					const res = await fetch(form.action, {
						method: "POST",
						body: formData
					});

					const result = await res.json();
					status.textContent = result.message;

					if (result.success) form.reset();
					return false;
				}
				if (typeof window !== "undefined") {
					document.querySelector(".contact-form")?.addEventListener("submit", handleContactFormSubmit);
				}
			</script>
		</div>
	</main>
	<Footer />
</Layout>

<style>
	main {
		max-width: 1200px;
		min-height: 70vh;
		margin: 0 auto;
		padding: 0 2rem;
	}

	.header {
		text-align: center;
		margin-bottom: 2rem;
	}

	.header h1 {
		font-size: 2.5rem;
		margin-bottom: 0.5rem;
		text-decoration: underline;
		text-decoration-color: rgb(var(--clr-primary));
		text-decoration-thickness: 0.2rem;
		text-underline-offset: 0.4rem;
	}

	.header p {
		font-size: 1.2rem;
		color: rgb(var(--clr-text));
		margin-bottom: 4rem;
	}

	.map-container {
		width: 100%;
		margin: 0 auto 2rem auto;
		border-radius: 0.7rem;
		overflow: hidden;
	}

	.contact-grid {
		display: flex;
		gap: 2rem;
		margin-bottom: 3rem;
	}

	.contact-info {
		flex: 1;
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
		justify-content: flex-start;
	}

	.info-item {
		display: flex;
		align-items: flex-start;
		gap: 1rem;
	}

	.icon {
		font-size: 2rem;
		color: rgb(var(--clr-primary));
		margin-top: 0.2rem;
	}

	.logo {
		width: 120px;
		height: auto;
		margin-top: 2rem;
	}

	.contact-form {
		flex: 2;
		display: flex;
		flex-direction: column;
		gap: 1rem;
		background: #fff;
		padding: 2rem 1.5rem;
		border-radius: 0.7rem;
		box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07);
	}

	.form-row {
		display: flex;
		gap: 1rem;
	}

	.contact-form input,
	.contact-form textarea {
		width: 100%;
		padding: 0.8rem 1rem;
		border: 1px solid rgb(var(--clr-border, 220, 220, 220));
		border-radius: 0.4rem;
		font-size: 1rem;
		font-family: inherit;
		background: #fafbfc;
		transition: border-color 0.2s;
	}

	.contact-form input:focus,
	.contact-form textarea:focus {
		outline: none;
		border-color: rgb(var(--clr-primary));
	}

	.contact-form button {
		align-self: flex-end;
		background: rgb(var(--clr-primary));
		color: #fff;
		border: none;
		border-radius: 2rem;
		padding: 0.8rem 2.2rem;
		font-size: 1.1rem;
		font-weight: 600;
		cursor: pointer;
		transition: background 0.2s;
	}

	.contact-form button:hover {
		background: #d12b5a;
	}

	.opening-hours {
		margin-top: 0.5rem;
		width: 100%;
		border-collapse: collapse;
		font-size: 1rem;
		color: rgb(var(--clr-text));
	}
	.opening-hours td {
		padding: 0.3rem 0.7rem 0.3rem 0;
	}
	.opening-hours td:first-child {
		font-weight: 600;
	}
	.opening-hours td:last-child {
		text-align: right;
		white-space: nowrap;
	}

	@media (max-width: 900px) {
		.contact-grid {
			flex-direction: column;
		}
		.contact-form {
			padding: 1.2rem 0.5rem;
		}
	}
</style>
